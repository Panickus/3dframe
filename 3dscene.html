<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>My 3D Scene</title>
      <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
      <script src="https://unpkg.com/aframe-extras/dist/aframe-extras.loaders.min.js"></script>
      <script src="https://unpkg.com/aframe-environment-component/dist/aframe-environment-component.min.js"></script>
      <script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-physics-system@v4.2.2/dist/aframe-physics-system.min.js"></script>
      <script src="mi-agua.js"></script>
   </head>

<body>
   <a-scene cursor="rayOrigin: mouse" physics="debug: true; gravity: -9.8" obb-collider="showColliders: true">
      
      <a-assets>
         <img 
            id="waterNormalTexture" 
            src="images/normalMap.jpg" 
            alt="water texture">
      </a-assets>

       <a-entity 
         id="floor" 
         static-body 
         geometry="primitive: plane; width: 5; height: 5" 
         rotation="-90 0 0" 
         position="7.130 0.999 -0.969" 
         scale="0.5 0.5 0.5"
         visible="false">
      </a-entity>

       <a-entity 
         id="ball" 
         dynamic-body="mass: 5; shape: sphere; restitution: 0.5" geometry="primitive: sphere" 
         position="7.130 1.760 -0.969" 
         scale="0.25 0.25 0.25" 
         velocity="0 -0.5 0" 
         obb-collider>
      </a-entity>


      <a-box 
         id="playButton" 
         position="-1 1.512 -3.851" 
         rotation="0 29.596 0" 
         color="#4CC3D9" 
         cambiar-color>
      </a-box>

      <a-box 
         id="pauseButton" 
         position="-1.045 2.299 -3.551" 
         rotation="0 26.449 0" 
         scale="0.5 0.5 0.5" 
         color="#FFC65D" 
         cambiar-color>
      </a-box>
      

      <a-entity 
         class="environment" 
         position="0 50 0"
         light="type: hemisphere; color: #CEE4F0; intensity: 2; groundColor: #445" 
         visible="">
      </a-entity>


      <a-entity 
         camera="camera1" 
         kinematic-body 
         position="0 1.440" 
         wasd-controls="" 
         rotation="0 -90 0"
         look-controls="" 
         aframe-injected="" 
         data-aframe-inspector-original-camera="">
      </a-entity>

      <a-entity 
         environment="preset: forest; skyType: atmosphere; lighting: Distant; groundColor: #445; grid: cross; groundTexture: walkerNoise">
      </a-entity>

      <a-entity 
         id="agua" 
         geometry="primitive: plane; width: 10; height: 10" 
         position="0.899 0.863 1" 
         rotation="-90 0 0"
         mi-agua="normalMap: url(/images/waterNormalTexture.jpg); normalTextureRepeat: 10 10;"
         animation="property: material.normalMap.offset; from: 0 0; to: 1 1; dur: 10000; loop: true; dir: alternate;">
      </a-entity> 

      <a-entity 
         id="basketball" 
         gltf-model="assets/basket_ball.glb" 
         position="7.130 1 -2.159"
         scale="0.25 0.25 0.25">
      </a-entity>

      <a-entity 
         id="football" 
         gltf-model="assets/soccer_ball.glb" 
         position="7.130 1 -1.5"
         scale="0.20 0.20 0.20">
      </a-entity>

      <a-entity 
         id="alvea"
         gltf-model="assets/Alvea.glb"
         position="1 1 1" scale="1 1 1">
      </a-entity>

      <a-entity 
         id="robot" 
         animation-mixer="clip: RobotArmature|Robot_Wave"      gltf-model="assets/Animated_Robot.glb"
         position="7.43491 1 0.24913" 
         scale="0.2 0.2 0.2" 
         rotation="0 180 0">
      </a-entity>

      <a-entity 
         id="panickus" 
         animation-mixer="" 
         gltf-model="assets/panickus.glb" 
         position="0.927 1 14.600"
         rotation="0 180 1">
      </a-entity>
   
   </a-scene>
   <script>
         AFRAME.registerComponent('cambiar-color', {
            schema: { default: '' },
            init: function () {
               var el = this.el; // Referencia al elemento A-Frame
               var defaultColor = el.getAttribute('material').color;
      
               el.addEventListener('click', function () {
                  var color = el.getAttribute('material').color;
                  el.setAttribute('material', 'color', color === 'red' ? defaultColor : 'red');
               });
            }
         });
   </script>
</body>
</html>
